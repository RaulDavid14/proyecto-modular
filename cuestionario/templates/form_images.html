<div class="container mt-4">
    <div class="border p-4 rounded shadow-sm">
        <form action="" method="post" id="formulario">
            {% csrf_token %}
            
            <!-- Contenedor de imagen y respuestas (uso de d-flex para alineación horizontal) -->
            <div class="d-flex mb-4">
                <!-- Imagen (lado izquierdo) -->
                <div class="mr-5">
                    {% if imagen_url %}
                        <img src="{{ imagen_url }}" alt="Imagen de la pregunta" class="img-fluid" style="max-width: 200px; height: auto;">
                    {% else %}
                        <p>No hay imagen disponible.</p>
                    {% endif %}
                </div>

                <!-- Respuestas (lado derecho) alineadas a la derecha con margen -->
                <div class="form-group d-flex flex-column" style="flex-grow: 1; justify-content: flex-start; margin-left: 500px;">
                    {% for respuesta in respuestas %}
                        <div class="form-check mb-3 text-right">
                            <input class="form-check-input" type="radio" value="{{ respuesta.id }}" id="respuesta_{{ respuesta.id }}" name="respuestas">
                            <label class="form-check-label" for="respuesta_{{ respuesta.id }}">
                                {{ respuesta.nombre_largo }}
                            </label>
                        </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Botones de navegación -->
            <div class="d-flex justify-content-between mt-4 px-3">
                <a class="btn btn-outline-success w-25" href="" id="anterior">Anterior</a>
                <button type="submit" class="btn btn-success w-25">Siguiente</button>
            </div>
        </form>
    </div>
</div>

<!-- Script de confirmación de salida -->
<script>
    let isSubmitting = false;
    let isNavigating = false;

    document.getElementById('formulario').addEventListener('submit', function() {
        isSubmitting = true;
    });

    document.getElementById('anterior').addEventListener('click', function() {
        isNavigating = true;
    });

    window.addEventListener('beforeunload', function (e) {
        if (isSubmitting || isNavigating) {
            return;
        }

        var mensaje = "¿Estás seguro de que deseas salir del formulario?";
        e.returnValue = mensaje;
        return mensaje;
    });
</script>
